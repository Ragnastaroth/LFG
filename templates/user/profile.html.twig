{% extends 'base.html.twig' %}

{% block title %}{{user.username}}'s Profile page{% endblock %}

{% block body %}
    <section>
        <article class="user_page">
            <h1>{{user.username}}</h1>
            <div class="profile_pic">
                {% if user.img %}
                    <img src="{{ asset('assets/medias/img/profile_directory/' ~ user.img) }}">
                {% else %}
                    <img src="{{ asset('assets/medias/img/profile_directory/random_user.png') }}">
                {% endif %}
            </div>
            <p>{{user.description}}</p>
            
            <p></p>
            <h4>My games</h4>
            <div class="profile_games_container">
                {% for game in user.games %}
                    <div class="profile_game_container">
                        <div>
                            <img src="{{ asset('assets/medias/img/game_directory/' ~ game.img) }}">
                        </div>
                        <p>{{game.name}}</p>
                    </div>
                {% endfor %}    
            </div>

            {% if app.user.id != user.id %}
                {% if user.isLikedByCurrentUser(app.user) %}
                    <form action="{{ path('unlike_user', {id: user.id}) }}" method="POST">
                        <button type="submit" class="btn">Unlike <i class="fa-solid fa-thumbs-down"></i></button>
                    </form>
                {% else %}
                    <form action="{{ path('like_user', {id: user.id}) }}" method="POST">
                        <button type="submit" class="btn">Like <i class="fa-solid fa-thumbs-up"></i></button>
                    </form>
                {% endif %}
            {% endif %}

            {% if app.user %}
                {% if user.id == app.user.id %}
                <a class="btn" href="{{ path('app_user_edit', {'id': app.user.id}) }}">Edit your profile</a>
                {% endif %}
                <a class="btn" href="{{ path('app_index') }}">Back to home</a>
            {% else %}
                <a class="btn" href="{{ path('app_index') }}">Back to home</a>
            {% endif %}  
        </article>
    </section>
{% endblock %}